\documentclass[t, 10pt, aspectratio=169, table, x11names]{beamer}
\usetheme{metropolis}

\input{/common/template}

\begin{document}

	\author{Victor Mayrink}
	\title{Curso de SQL}
	\subtitle{Aula 1: Instalação das ferramentas e configuração do ambiente}

	%Frame: title
	\begin{frame}[plain]
		\maketitle
	\end{frame}
	
	%Frame: agenda
	\begin{frame}
		\frametitle{Resumo da aula}
		\vspace{0.5cm}
		\begin{figure}[h]
			\includegraphics[width=0.70\textwidth]{docker-window.png}
		\end{figure}
	\end{frame}

	%Frame: client-server
	\begin{frame}
		\frametitle{Arquitetura cliente-servidor}
		A comunicação com o banco de dados, ocorre em um esquema \textbf{cliente-servidor}
		\vspace{3mm}
		\begin{figure}[h]
			\includegraphics[width=0.60\textwidth]{client-server-diagram.png}
		\end{figure}
		\begin{itemize}
			\item O cliente envia uma \textbf{requisição} (ou comando)
			\item O servidor executa o comando e retorna uma \textbf{resposta}
		\end{itemize}
	\end{frame}
	
	%Frame: database clients
	\begin{frame}
		\frametitle{Clientes de bancos de dados}
		Existem diferentes \textit{softwares} que funcionam como clientes de bancos de dados
		\begin{figure}
			\vspace{2mm}
			\centering
			\includegraphics[height=15mm]{dbeaver.png}
			\hspace{5mm}
			\includegraphics[height=15mm]{logo-mysql-workbench}
			\hspace{5mm}
			\includegraphics[height=15mm]{logo-datagrip.png}
			\hspace{5mm}
			\includegraphics[height=15mm]{logo-dbvis.png}
		\end{figure}
	\end{frame}

	%Frame: database servers
	\begin{frame}
		\frametitle{Servidores de bancos de dados}
		\begin{itemize}
			\item[] Da mesma forma, também existem \textit{softwares} que são servidores de banco de dados
			\begin{figure}
				\vspace{6mm}
				\centering
				\includegraphics[height=13mm]{logo-postgres}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-mysql}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-mariadb}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-redshift}
			\end{figure}
			\begin{figure}
				\vspace{6mm}
				\centering
				\includegraphics[height=13mm]{logo-snowflake}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-sql-server}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-sqllite}
				\hspace{5mm}
				\includegraphics[height=13mm]{logo-hive}
			\end{figure}
		\end{itemize}
	\end{frame}

	%Frame: client-server
	\begin{frame}
		\frametitle{Arquitetura cliente-servidor}
		Normalmente, o servidor e o cliente rodam em máquinas diferentes e se comunicam via internet. 
		\begin{figure}[h]
			\includegraphics[width=0.50\textwidth]{client-server-diagram.png}
		\end{figure}
		\begin{itemize}
			\item[] Caso geral:
			\begin{itemize}
				\item O cliente é o nosso computador trabalho
				\item O servidor é um banco de dados rodando na nuvem (AWS, GCP, Azure, UolHost, etc...)
			\end{itemize}
			\vspace{2mm}
			\item[] No nosso caso vamos simular um servidor na nossa própria máquina de trabalho. 
		\end{itemize}
	\end{frame}

	\section{Bora começar!?}

	\begin{frame}
		\frametitle{Requisitos}
		Para fazer atividades do curso, vamos precisar instalar algumas ferramentas
		\begin{columns}[t]
			\begin{column}{0.20\textwidth}
				\vspace{0.3cm}
				\begin{figure}[h]
					\includegraphics[width=1.5cm, right]{dbeaver.png}
				\end{figure}
				\vspace{1.1cm}
				\begin{figure}[h]
					\includegraphics[width=1.5cm, right]{docker.png}
				\end{figure}
			\end{column}

			\begin{column}{0.70\textwidth}
				\begin{itemize}
					\item \textbf{Dbeaver}: \href{https://dbeaver.io/download}{ \appallingunderline{https://dbeaver.io/download}}
					\begin{itemize}
						\item Interface amigável para executar comandos no banco de dados
						\item Suporta diferentes tipos de bancos de dados
					\end{itemize}

					\vspace{0.4cm}
					\item \textbf{Docker}: \href{https://www.docker.com/products/docker-desktop/}{\appallingunderline{https://www.docker.com/products/docker-desktop/}}
					
					\begin{itemize}
						\item Utilizaremos o Docker para simular um \textit{servidor} de banco de dados no nosso próprio computador
						\item Além do Docker, vamos precisar da \textit{imagem} do banco de dados que iremos executar
					\end{itemize}
				\end{itemize}
			\end{column}
			\begin{column}{0.05\textwidth}
			\end{column}
		\end{columns}
	\end{frame}

	\section{Instalação do Dbeaver}

	%Frame: dbeaver installation #1
	\begin{frame}
		\frametitle{Instalação Dbeaver}
		A instalação do Dbeaver é relativamente simples. Baixe o instalador e siga o fluxo de instalação normalmente utilizando as configurações recomendadas e pré-definidas.
		\begin{figure}[h]
			\centering\vspace{2mm}
			\includegraphics[width=0.45\textwidth]{dbeaver-install-start.png}
			\hspace{0.5cm}
			\includegraphics[width=0.45\textwidth]{dbeaver-install-finish.png}
		\end{figure}
	\end{frame}
	
	%Frame: dbeaver installation #2
	\begin{frame}
		\frametitle{Instalação Dbeaver}
		Depois de instalado. Esta é a aparência do Dbeaver:
		\begin{figure}[h]
			\centering\vspace{2mm}
			\includegraphics[width=0.70\textwidth]{dbeaver-window.png}
		\end{figure}
	\end{frame}

	\section{Instalação do Docker}

	%Frame: Powershell installation
	\begin{frame}
		\frametitle{Microsoft PowerShell}
		Usuários do Windows também devem instalar o \textbf{Microsoft PowerShell}
		\vspace{0.6cm}
		\begin{columns}
			\column{0.07\textwidth}
			\column{0.15\textwidth}
			\begin{figure}[h]
				\includegraphics[width=1.5cm]{powershell-icon.png}
			\end{figure}
			\column{0.80\textwidth}
			\begin{enumerate}
				\item Abra o prompt de comando e execute o winget para instalar o Microsoft PowerShell
				\lstinputlisting[style=winprompt]{winget-powershell.cmd}
				\vspace{0.4cm}
				\item Utilize a barra de pesquisas e procure pelo PowerShell. Verifique se o programa foi instalado corretamente.
			\end{enumerate}
			\column{0.60\textwidth}
		\end{columns}
	\end{frame}
	
	%Frame: Powershell screenshot
	\begin{frame}
		\frametitle{Microsoft PowerShell}
		\vspace{0.5cm}
		\begin{figure}[h]
			\includegraphics[width=0.70\textwidth]{powershell-window.png}
		\end{figure}
	\end{frame}

	%Frame: WSL2
	\begin{frame}
		\frametitle{WSL 2}
		\vspace{0.5cm}
		\begin{figure}[h]
			\includegraphics[width=0.70\textwidth]{powershell-window.png}
		\end{figure}
	\end{frame}
	
	\begin{frame}
		\frametitle{Instalação do Docker}
		\begin{enumerate}
			\item Vá até \href{https://www.docker.com/products/docker-desktop/}{\appallingunderline{https://www.docker.com/products/docker-desktop/}}
			\item Baixe o instalador do \textit{Docker Desktop} compatível com seu sistema
			\item Siga os passos de instalação
		\end{enumerate}
		\begin{figure}[h]
			\fbox{\includegraphics[width=0.40\textwidth]{docker-webpage.png}}
			\hspace{0.5cm}
			\fbox{\includegraphics[width=0.355\textwidth]{docker-installation.png}}
		\end{figure}
	\end{frame}
	
	\begin{frame}
		\frametitle{Docker}
		\vspace{0.5cm}
		\begin{figure}[h]
			\includegraphics[width=0.70\textwidth]{docker-window.png}
		\end{figure}
	\end{frame}
	
	\section{Simulação do servidor MySQL}

	\begin{frame}
		\frametitle{Instalação das ferramentas}
		\vspace{0.5cm}
		\begin{center}
			\LARGE
			Muito bem, finalizamos a instalação das ferramentas! :D
		\end{center}
		\vspace{1cm}
		\begin{center}
			\LARGE
			Agora vamos iniciar a configuração! :(
		\end{center}
	\end{frame}
	
	\begin{frame}[t]
		\frametitle{Executando o MySQL com o database SakilaDB}
		Vamos utilizar o Docker para emular um banco de dados na nossa própria máquina.
		
		Clique na barra de pesquisa do Docker Desktop e procure pela imagem \textbf{\texttt{sakiladb/mysql}}
		\vspace{0.3cm}
		\begin{figure}[h]
			\includegraphics[width=0.45\textwidth]{docker-sakila-search-1.png}
			\hspace{0.5cm}
			\includegraphics[width=0.45\textwidth]{docker-sakila-search-2.png}
		\end{figure}
	\end{frame}
	
	\begin{frame}[t]
		\frametitle{Executando o MySQL com o database SakilaDB}
		Ao executar o container do banco \textbf{\texttt{sakiladb}}, os logs são exibidos na tela.
		
		Os logs devem indicar quando o servidor \texttt{\textbf{MySQL}} estiver pronto para receber novas conexões.
		\vspace{0.1cm}
		\begin{figure}[h]
			\includegraphics[width=0.55\textwidth]{docker-sakiladb-ready.png}
		\end{figure}
	\end{frame}

	\section{Conectando-se ao servidor MySQL}

	\begin{frame}[t]
		\frametitle{Conectando-se ao banco através do DBeaver}
		Agora vamos nos conectar ao banco de dados através do Dbeaver.
		
		\begin{enumerate}
			\small
			\item Abra o Dbeaver e clique em \texttt{Arquivo > Novo}
			\item Em seguida, selecione \texttt{Conexão com banco de dados}, dento do diretório Dbeaver
			\item Escolha o banco \texttt{\textbf{MySQL}} e clique em avançar
		\end{enumerate}
		
		\vspace{0.1cm}
		\begin{figure}[h]
			\includegraphics[width=0.32\textwidth]{dbeaver-new.png}
			\hspace{0.5cm}
			\includegraphics[width=0.32\textwidth]{dbeaver-db-select.png}
		\end{figure}
	\end{frame}
	
	\begin{frame}
		\frametitle{Conectando-se ao banco através do DBeaver}
		\vspace{0.05cm}
		\begin{columns}[t]
			\begin{column}{0.50\linewidth}
				\centering
				\begin{enumerate}
					\small
					\setcounter{enumi}{3}
					\item Preencha as credenciais de conexão, conforme a documentação da imagem do \textbf{\texttt{sakiladb}} que está em execução.
					\begin{itemize}
						\item \textbf{host:} localhost
						\item \textbf{port:} 3306
						\item \textbf{database:} sakila
						\item \textbf{user:} sakila
						\item \textbf{password:} p\_ssw0rd
					\end{itemize}
					\vspace{0.15cm}
					\item Finalmente clique em \texttt{Testar Conexão}
				\end{enumerate}
			\end{column}
			\begin{column}{0.45\linewidth}
				\begin{figure}[h]
					\includegraphics[width=0.85\textwidth, left]{dbeaver-edit-connection.png}
				\end{figure}
			\end{column}
		\end{columns}
	\end{frame}
	
\end{document}